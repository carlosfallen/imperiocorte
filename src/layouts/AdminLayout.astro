---
import BaseLayout from './BaseLayout.astro';

interface Props {
  title: string;
}

const { title } = Astro.props;
const { admin } = Astro.locals;
const currentPath = Astro.url.pathname;
---

<BaseLayout title={title}>
  <div class="admin-wrapper">
    <aside class="admin-sidebar">
      <div class="sidebar-header">
        <h2>Império<span>Corte</span></h2>
        <p>Painel Admin</p>
      </div>
      
      <nav class="sidebar-nav">
        <a href="/admin" class:list={['nav-item', { active: currentPath === '/admin' }]}>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"></rect>
            <rect x="14" y="3" width="7" height="7"></rect>
            <rect x="14" y="14" width="7" height="7"></rect>
            <rect x="3" y="14" width="7" height="7"></rect>
          </svg>
          <span>Dashboard</span>
        </a>
        
        <a href="/admin/agendamentos" class:list={['nav-item', { active: currentPath.startsWith('/admin/agendamentos') }]}>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          <span>Agendamentos</span>
        </a>
        
        <a href="/admin/servicos" class:list={['nav-item', { active: currentPath.startsWith('/admin/servicos') }]}>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
          </svg>
          <span>Serviços</span>
        </a>
        
        <a href="/admin/profissionais" class:list={['nav-item', { active: currentPath.startsWith('/admin/profissionais') }]}>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
          </svg>
          <span>Profissionais</span>
        </a>
        
        <a href="/admin/relatorios" class:list={['nav-item', { active: currentPath.startsWith('/admin/relatorios') }]}>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="20" x2="18" y2="10"></line>
            <line x1="12" y1="20" x2="12" y2="4"></line>
            <line x1="6" y1="20" x2="6" y2="14"></line>
          </svg>
          <span>Relatórios</span>
        </a>
        
        <a href="/admin/configuracoes" class:list={['nav-item', { active: currentPath.startsWith('/admin/configuracoes') }]}>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6m0 6v6m8.66-9l-5.2 3M8.54 14l-5.2 3m12.66 0l-5.2-3M8.54 10l-5.2-3"></path>
          </svg>
          <span>Configurações</span>
        </a>
      </nav>
      
      <div class="sidebar-footer">
        <div class="admin-info">
          <div class="admin-avatar">{admin?.name?.[0] || 'A'}</div>
          <div class="admin-details">
            <p class="admin-name">{admin?.name}</p>
            <p class="admin-role">{admin?.role}</p>
          </div>
        </div>
        <a href="/api/admin/logout" class="btn-logout">Sair</a>
      </div>
    </aside>
    
    <main class="admin-content">
      <slot />
    </main>
  </div>
</BaseLayout>